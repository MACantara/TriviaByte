{% extends "base.html" %}

{% block content %}
<div class="container py-4">
    <h1 class="mb-4">Question Analytics</h1>
    
    <div class="card border-0 shadow-sm">
        <div class="card-body">
            <div class="table-responsive">
                <table class="table" id="analyticsTable">
                    <thead>
                        <tr>
                            <th>Question</th>
                            <th>Correct Answers</th>
                            <th>Wrong Answers</th>
                            <th>Avg Time (sec)</th>
                            <th>Total Score</th>
                            <th>Accuracy</th>
                        </tr>
                    </thead>
                    <tbody>
                        <!-- Data will be loaded dynamically -->
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', async () => {
    try {
        const response = await fetch('/api/analytics/questions');
        const data = await response.json();
        
        const tbody = document.querySelector('#analyticsTable tbody');
        data.forEach(item => {
            tbody.innerHTML += `
                <tr>
                    <td>${item.question}</td>
                    <td>${item.correct_answers}</td>
                    <td>${item.wrong_answers}</td>
                    <td>${item.avg_time_taken}s</td>
                    <td>${item.total_score}</td>
                    <td>${item.accuracy}%</td>
                </tr>
            `;
        });
    } catch (error) {
        console.error('Error loading analytics:', error);
    }
});
</script>
{% endblock %}
